// @ts-nocheck
// -----

// Example Typescript Usage File

// Below are examples of a user-created Typescript code that uses the type information generated by gqx

// You can edit this TypeScript file.


import { gqx, Book, Person, Author, User } from "./gqx";

const bookFrag = Book.$(
  Book.id,
  Book.title,
  Book.author.name,
  Book.author.books.title,
);

// Hover over the result to see the type
const bookResult = await gqx.query.getBook({ id: "abc" }, bookFrag)

bookResult.title // string
bookResult.author.name // string
bookResult.author.books // Array<{ __typename: string, title: string }>

// Example of handling fragments with interfaces and unions

// Person is implemented by Author & User
const peopleQueryFrag  = Person.$(
  Person.name,
  Author.books.id, // Author implements
  User.username,
)

// Hover over the result to see the type
const peopleResult = await gqx.query.getPeople({ filter: "A" }, peopleQueryFrag)

for(const person of peopleResult) {
  switch(person.__typename) {
    case "Author": // has books
      person.books.length
      continue;
    case "User": // has username
      person.username.toLowerCase()
      continue;
  }
}

// Each of the following fragment declarations result in equivalent types
const bookFragment1 = Book.$(
  Book.id,
  Book.title,
  Book.author.name,
  Book.author.books.title,
);

const bookFragment2 = Book.$(
  Book.id,
  Book.author.name,
  Book.author.$(
    Author.name,
    Author.books.title,
  ),
);

const authorFragment = Author.$(
  Author.name,
  Author.books.$(
    Book.title,
  ),
)
const bookFragment3 = Book.$(
  Book.id,
  Book.title,
  Book.author.$(
    authorFragment
  )
);

// Hover over the results to see that the result types are equivalent.
const result1 = await gqx.query.getBook({ id: "abc" }, bookFragment1)
const result2 = await gqx.query.getBook({ id: "abc" }, bookFragment2)
const result3 = await gqx.query.getBook({ id: "abc" }, bookFragment3)
